# 오라클 활용

## 데이터 타입

**LOB** 데이터 타입: 대용량 데이터를 저장하기 위한 타입

종류

- BLOB
- CLOB
- NCLOB
- BFILE

BFILE 타입은 운영체제의 파일 시스템을 이용하여 저장하는 타입으로 트랜잭션이 지원되지 않고 읽기 연산만 지원된다. 

## 집합 연산

오라클은 차집합 연산으로 except 대신 minus를 사용하며 all 키워드는 union all 만 허용한다.

## 함수

### dual 테이블

dual 테이블은 sys 소유의 1x1테이블이다.  
함수의 결과를 볼 때와 같은 경우에 사용한다.

### 문자 처리 함수

| 함수      | 기능                                                         |
| --------- | ------------------------------------------------------------ |
| Lower()   | 소문자로 변환                                                |
| Upper()   | 대문자로 변환                                                |
| Initcap() | 각 단어의 첫 글자를 대문자로, 나머지는 소문자로 변환         |
| length()  | 문자열의 길이 리턴                                           |
| concat()  | 문자열 연결                                                  |
| instr()   | 문자열에서 문자를 찾음, 시작 위치와 몇번째 문자를 찾을 것인지 지정 |
| replace() | 특정 문자열을 치환                                           |
| substr()  | 문자열 추출, 시작 위치와 길이 지정                           |

### 숫자 처리 함수

| 함수    | 기능                                                         |
| ------- | ------------------------------------------------------------ |
| round() | 반올림하는 함수, 인자에 따라 반올림 자릿수가 달라짐  <br />n > 0 소수점 아래 n의 자리까지 반올림  <br />n = 0 1의자리까지 반올림  <br />n < 0 1의자리에서 반올림 |
| trunc() | 버림 하는 함수, round와 비슷하게 작동                        |
| sign()  | 주어진 값이 양수인지 음수인지 판단하는 함수                  |

### 날짜형 처리 함수

sysdate는 현재 날짜를 반환하며, 기본 형식은 YY/MM/DD 이다.  
date 타입에 연산을 하면 날짜에 가감을 한다.  
round() 함수를 사용하여 반올림한 날짜를 구할 수 있다 ex) round(sysdate, 'month'), 달을 기준으로 반올림 

months_between()함수는 두 날짜 사이의 날 수를 month를 기준으로 반환한다.

### 형 변환 함수

to_char()함수는 날짜나 숫자를 문자열로 변경하기 위한 함수이다.  

날짜를 변환할 때 날짜 출력형식을 지정할 수 있다

숫자를 변환할 때 0 또는 9의 개수로 출력할 자릿수를 지정할 수 있다.  
0일 경우 자릿수가 남으면 남는 자리가 0으로 채워지며, 9일 경우 남는 자리는 보이지 않는다

to_number()함수는 숫자를 문자형으로 변환한다.

## 뷰

생성할 때 or replace 옵션을 추가할 수 있고, 이 옵션은 생성하려는 뷰의 이름이 이미 정의된 뷰의 이름과 같을 경우 그 뷰의 정의를 수정한다.

force 옵션은 베이스 테이브 존재 여부와 관계없이 뷰를 생성한다

with read only옵션을 사용하면 뷰를 통해 검색만 가능하고 수정은 불가능하다

### 실체화된 뷰

실제 튜플을 가지는 뷰를 실체화된 뷰라고 한다

실제 튜플을 가지고 있기 때문에 빠른 질의문 응답이 가능하다  
단점으로는 뷰가 가지는 튜플이 최신 정보가 아닐 수도 있다는 점이다 

빠른 응답이 필요하지만 최신 정보가 필요하지 않을 때 사용한다.

## 순환 질의

오라클에서 순환 질의는 recursive 키워드가 없고, union 대신에 union all을 사용한다

## 권한

오라클은 권한을 시스템권한, 객체 권한으로 구분한다.

시스템 권한은 대상 오브젝트에 권한을 부여할 수 있는 권한이고, 객체 권한은 대상 오브젝트에 대한 권한이다.  
시스템 권한에서 with admin option을 사용할 수 있고, 객체 권한에서 with grant option을 사용할 수 있다

## 동의어

create synonym 구문으로 동의어를 만들 수 있다  
스키마.객체의 표현식을 동의어를 통해 접근할 수 있다.

## 트리거

표준과 비슷하지만 바디 부분을 PL/SQL로 작성한다

