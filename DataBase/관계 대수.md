# 관계 대수(Relational Algebra)

## 관계 대수란?
관계형 데이터 모델의 일부이며, 관계, 제약 사항에 대한 연산을 제공한다.  

관계 대수는 입력으로 하나 혹은 두개의 관계를 가지고, 연산 결과로 새로운 관계를 생성한다.  

관계 대수는 상용 DB에서 SQL로 제공된다.  

## 관계 대수의 종류
관계 대수는 기본 대수와 확장 관계 대수로 나뉨
### 기본 대수
기본 대수는 기본적으로 제공하는 기능

#### 1. select
$σ_{p}(r)$
```
p = 조건, r = 입력 관계
```
select(선택)연산은 입력 관계에서 주어진 조건을 만족하는 tuple을 찾는 연산이다.


#### 2. project
$Π_{A_{1},A_{2},...,A_{n}}(r)$  

project(투영)연산은 관계에서 임의의 속성을 선택하는 연산이다.  
A는 관계 r에 있는 속성이고, 여러개를 선택할 수 있다.

#### 3. union
$r∪s$  
union(합집합)연산은 집합에서의 합집합과 유사하며, tuple을 원소로 하여 합집합 연산을 한다.  
연산이 유효하려면 tuple의 속성 개수가 동일해야하고, 대응되는 속성의 도메인이 상호 호환되어야 한다

#### 4. set difference
$r-s$  
합집합 연산과 비슷하게 tuple을 원소로 하는 차집합 연산이다.
#### 5. cartesian product
$r×s$  
카티시안 곱은 입력 관계에 속하는 모든 tuple의 가능한 조합을 결과로 내놓는다.  
만약 입력 테이블에 동일한 이름의 속성이 있다면 rename 연산을 통해 이름을 바꾼 후 연산해야 한다. 바꾸지 않으면 자연 조인 연산이 되기 때문이다.  
카티시안 곱의 연산 결과는 크기가 큰 편이다. 입력 테이블의 tuple의 곱 만큼의 크기를 가지기 때문이다.   

#### 6. rename
$ρ_{X(A_{1},A_{2},...A_{n})}(E)$
```
X=변경할 관계명, A=변경할 속성명, E=입력 관계
```
rename(재명명)연산은 관계 또는 관계의 속성의 이름을 바꾼 관계를 결과로 산출한다.  
둘 중 하나만 변경하는 것도 가능하다.  
관계명만 변경하고자 할 때는 속성 부분을 생략하고, 속성명만 변경하고자 모두 명시해야 한다.  

### 확장 관계 대수
확장 관계 대수는 기본 대수로 동일하게 연산이 가능하지만 사용의 편의를 제공한다. 

#### 1. Assignment
할당 연산자는 화살표(<-)로 나타내며 복잡한 질의문을 하나의 문자로 치환하여 편리하게 사용할 수 있게 한다.  

#### 2. intersection
$r∩s(= r-(r-s))$  
교집합 연산은 위의 집합 연산과 비슷하게 두 관계의 교집합을 결과로 산출한다.  
속성 개수가 동일해야 하고, 속성이 상호 호환적이어야 하는 조건은 위의 집합 연산과 동일하다.  

#### 3. join
조인 연산은 두 테이블을 연결하는 연산이다.
조인 연산에는 내부 조인과 외부 조인이 있다.  

내부 조인  

1. 세타 조인  
세타 조인은 다음과 같은 연산을 수행한다.  
1.입력 테이블에 대해 카티시안 곱 수행  
2.조인 조건을 이용하여 선택 연산 수행  
3.투영 연산 수행  

2. 동등 조인  
동등 조인은 세타 조인에서 조인 조건이 동등한 조건을 가지는 조인이다.  

3. 자연 조인  
자연 조인은 동등 조인에서 중복을 제거한 조인이다.  
가장 자주 사용하는 조인 연산이다.  

외부 조인  
내부 조인은 조인 조건을 만족시키지 않는 tuple은 결과에서 제외된다.  
하지만 외부 조인은 이런 tuple도 결과에 포함한다.  
왼쪽 외부 조인은 입력에서 왼쪽에 오는 관계의 모든 tuple이 결과에 나와야 하고, 오른쪽 외부 조인은 반대로 오른쪽 관계의 tuple이 모두 결과에 나와야 한다.  
완전 외부 조인은 위의 두 외부 조인 연산을 합친 연산이다.  

#### 4. division
$r÷s$  
나눔 연산은 공통 이름을 가지는 공통 속성이 제거된 결과 관계를 가지고, 그 관계의 tuple은 s관계의 공통 속성에 속하는 모든 tuple을 가진 r관계의 tuple이다.  
나눔 연산은 모든 조건을 포함하는 질의를 구하는 데 사용한다.  
나눔 연산은 카티시안 곱, 투영, 차집합을 사용하여 표현할 수 있다.

출처 데이터베이스 I 이론 및 실제, 이상호
