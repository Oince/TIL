# ER Data Model

ER data model은 데이터베이스를 개체와 관계로 모델링한다.

**개체**는 구별 가능한 객체를 의미하며, 속성을 가진다.  
개체 중에서 같은 속성을 가지는 모임을 개체 타입이라고 한다.

개체가 다른 개체와 연관이 있는 것을 **관계**라고 한다.  
관계 또한 속성을 가질 수 있다  
관련되는 개체의 개수를 차수라고 하고, 2진, 3진 등의 관계성 집합이 있다

속성은 개체 또는 관계성이 가지는 특성이다  
단순 속성은 속성이 하나만 있는 것이고 복합 속성은 속성 하나가 여러개의 속성을 가지는 것이다  
하나의 속성에 여러개의 값을 가질 수 있는 다중값 속성도 있다.

**카디날리티 제약**은 관계 집합을 통해 다른 개체와 관련될 수 있는 개체의 수를 정하는 제약이다  
1:1, 1:n, n:n 이 있다.

## ER diagram

개체는 사각형, 관계는 다이아몬드으로 표현하고, key 값은 속성에 밑줄을 친다

화살표는 1을 의미하고, 화살표가 없으면 n을 의미한다  
n은 0도 가능하다

**전체 참여**는 개체 집합의 모든 개체가 관계에 참여하는 것이고, **부분 참여**는 개체 집합중 일부가 관계에 참여하지 않은 경우이다  
전체 참여는 두 줄, 부분 참여는 한 줄로 표현한다.

개체 집합이 관계성 집합에 참여할 때 두 번 이상 참여하는 경우 **롤**이라고 한다.  
재귀적으로 구현한다

주 키가 있는 개체 집합을 **강한 개체 집합**이라고 하고, 주 키가 없으면 **약한 개체 집합**이라고 한다  
약한 개체 집합은 강한 개체 집합 없이 존재할 수 없으며, 반드시 전체 참여이어야 하고, n에 대응해야 한다.  
약한 개체 집합은 부분 키를 가질 수 있고, 약한 개체 집합의 주 키는 부분 키+(강한 개체 집합의)주 키 이다.  
약한 개체 집합은 사각형 두개를 겹친 모양으로 표현된다

## 관계형 스키마로 변환

기본적으로 개체와 관계성은 테이블로 변환된다  

강한 개체 집합과 약한 개체 집합은 테이블로 변환되지만, 이들의 관계성 집합은 테이블로 변환되지 않는다  
약한 개체 집합의 테이블에 강한 개체 집합의 주 키가 포함되는 방식으로 변환된다

다대다 관계성 집합은 반드시 독립적인 테이블로 변환되며, 관여하는 개체 집합의 주 키를 포함한다.  
다대일 관계성 집합의 경우 독립적인 테이블로 변환할 수도 있고, n쪽 개체로 병합될 수도 있다  
일대일 관계성 집합은 독립적인 테이블로 변환하거나, 둘 중 하나에 병합한다

복합 속성은 밖으로 꺼내서 테이블 속성으로 변환된다.  
다수값 속성은 따로 독립된 테이블로 변환되고, 관련 개체의 주 키 속성을 포함한다

## 설계 방법

어떠한 사항을 개체로 표현하거나 개체의 속성으로 표현할 수 있다.  
개체로 분리해서 표현하면 관계성 집합을 가진다

명사는 개체로 표현하고 동사는 관계성으로 표현한다

관계성의 속성 위치는 다대다에는 반드시 관계에 위치해야 하지만 일대다 혹은 일대일에서는 한 쪽에 위치할 수 있다

중복 속성은 제거해야 한다

다진 관계성을 다수개의 이진 관계성으로 변환할 수 있지만 일부 정보가 유실될 수 있다.

