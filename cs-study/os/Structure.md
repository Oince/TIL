# 운영체제 구조

## 운영체제란?

운영체제는 하드웨어를 쉽고 효율적으로 사용할 수 있는 추상화를 제공하고, 자원의 공유 및 분배를 위한 정책을 결정한다.

컴퓨터의 주요 자원들을 다음과 같이 추상화해서 제공한다

- cpu: 프로세스
  - 실행되고 있는 프로그램
  - 각 프로그램을 구별해서 실행시키기 위함
  - 프로세스의 생성과 삭제, 어떤 프로세스을 실행시킬지(스케줄링) 결정

- memory: 주소 공간
  - 프로세스가 차지하는 메모리 공간
  - 각 프로세스의 독립적인 메모리 공간을 보호하기 위함
  - 어떤 프로세스를 메모리에 적재하고 제거할 것인지 결정

- disk: 파일
  - 파일을 어떤 방식으로 저장할지 결정

## 구조



## System call

CPU에는 2가지 이상의 실행 모드가 있다. **mode bit**가 어떤 모드인지 구별한다. 모드를 나누는 이유는 잘못된 사용자로부터 시스템을 보호하기 위해서다. 

모드는 커널 모드와 유저 모드로 나뉘며, 모드에 따라 접근할 수 있는 메모리나 실행 가능한 명령어가 제한된다.

- **커널 모드**
  - 모든 권한을 가진 모드
  - 운영 체제가 실행되는 모드
  - privilege 명령어 및 레지스터 접근 가능
  - 하드웨어 직접 제어 가능
- **유저 모드**
  - 커널 모드에 비해 낮은 권한
  - 어플리케이션이 실행되는 모드
  - privilege 명령어 실행 불가능

**시스템 콜**은 유저 모드에서 커널 모드로 진입하기 위한 인터페이스다. 유저 프로그램에서 커널이 제공하는 서비스를 이용하기 위해서는 시스템 콜을 호출해야 한다. 

응용 프로그램 개발자는 이런 시스템 콜을 직접 호출하는 것이 아닌 POSIX API와 같은 API로 호출한다. 이런 API들은 사용하는 언어의 라이브러리에 구현되어 있으며 내부적으로 실제 시스템 콜을 호출한다. API를 사용하면 사용자는 시스템 콜의 상세한 명세를 알 필요 없이 간편하게 호출할 수 있다는 장점이 있다. 

