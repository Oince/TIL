# 정보 보호

## 기초

**암호 기법**: 메세지를 변화시키는 과학이나 기술을 의미

**Key**: uniformly distributed random string  
key에는 대칭키와 공개키가 있음

기본 용어 정리

- plaintext: 평문, 암호화 되기 전의 메세지
- encryption algorithm: 암호화 알고리즘
- secret key: 암호화 키, 암호 알고리즘의 안정성은 암호화 키에 의존함
- ciphertext: 암호문, 암호화 된 후의 메세지
- decryption algorithm: 복호화 알고리즘

공격자가 암호의 키를 알아내거나 암호문의 일부분을 알 수 있다면 그 암호 시스템은 안전하지 않은 암호 시스템이다.  
암호문에서 평문에 대한 어떠한 정보도 유출되면 안된다.

**3대 정보보호 서비스(CIA)**

- **기밀성(confidentiality)**
  - 데이터를 숨기는 것
- **무결성(integrity)**
  - 위조나 훼손 없이 데이터를 보존하는 것
- **가용성(availability)**
  - 원할 때 데이터에 접근할 수 있는 것

이외에 인증, 부인방지, 접근제어 등이 있음

## 암호학적 해쉬 함수

무결성은 원본 메세지의 변조를 방지하기 위한 서비스이다.  
대칭키/공개키 암호 시스템은 기밀성은 제공하지만 무결성은 제공하지 않음  
무결성을 제공하기 위해 **Modification detection code(MDC)**를 사용함  
MDC를 생성하는 방법으로 **암호학적 해쉬함수** 사용
$$
h = H(M)
$$
암호학적 해쉬함수는 임의의 크기의 데이터를 입력으로 넣으면 고정된 크키의 출력 값을 내보냄.  
기본적으로 키가 사용되지 않지만 키를 사용하는 해쉬 함수도 있으며 이는 인증에 사용되는 MAC을 생성함  
암호학적 해쉬 함수는 입력값으로 출력값을 만들기는 쉽지만 그 반대는 어려운 one-way 함수의 일종

**Avalanche effect**는 해쉬 함수의 입력값이 한비트만 달라져도 그 결과 값이 완전히 달라지는 효과임  

**MDC**는 메세지 변조 여부를 검증하기 위해 암호학적 해쉬 함수를 이용하여 만듦  
받은 메세지를 같은 해쉬함수에 넣고 그 결과가 받은 MDC와 같으면 데이터를 수신하고 다르면 거절한다  
이 경우 MDC는 안전한 채널로 전송하여 변조되지 않도록 하는것이 중요하다

<img src="MDC 이미지.png">

**Message authentication code(MAC)**은 인증에 사용되고, 키와 메세지를 같이 해쉬함수에 넣어서 만든 코드이다  
사전에 서로 공유한 키와 메세지를 해쉬하여 나온 값과 받은 MAC 값을 비교하여 데이터 수신을 결정한다  
키가 존재하기 때문에 안전한 채널로 전송할 필요가 없다

<img src="MAC 이미지.png">

## 대칭키 암호 시스템

대칭키 암호 시스템은 동일한 키를 사용하여 암호화 하는 방식이다.  
키 공유 알고리즘을 통해 서로 키를 교환한다.  
다음과 같은 방식으로 암호화한다.

- Confusion: 키와 암호문과의 관계를 감추는 성질
  - 주로 치환(sunstitution)사용
- Diffusion: 평문과 암호문과의 관계를 감추는 성질
  - 주로 transposition을 사용

### AES

AES는 advanced encryption standard의 약자로 대칭키 암호 알고리즘을 사용하는 블록 암호이다.  
**블록 암호**란 평문을 일정한 크기의 블록으로 쪼개서 암호화 하는 방식이다  
AES는 한 블록을 128비트로 하고 128/192/256비트의 키 중에 하나를 선택해서 사용할 수 있다.  
선택한 키에 따라 라운드를 10/12/14번 반복해서 작업한 후 암호화된 암호문을 결과로 내놓는다

블록의 데이터는 16진수로 변경된 후 4X4 행렬로 변환되고 이 행렬을 **state(상태)** 라고 함  

하나의 라운드는 다음 4가지 과정으로 구성되어 있다

- **subbytes**
  - 미리 정해진 S-box 테이블로 state를 치환함
- **shiftrows**
  - 각각의 행에서 위치를 바꿈
  - 1행은 그대로, 다음 행은 하나씩 늘려가면서 앞의 열의 값을 뒤로 보냄
  - 2행1열 -> 2행 4열, 3행 1,2열 -> 3행 3,4열...
- **mixcolumns**
  - 미리 정해진 행렬과 state를 행렬곱
- **addroundkey**
  - 키와 state를 열 단위로 xor 연산해서 state에 저장

각각의 라운드에서 사용하는 키는 키 확장을 통해서 각기 다른 키를 사용한다.  

## 공개키 암호 시스템

